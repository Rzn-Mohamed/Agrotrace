# ğŸ”Œ Dashboard Microservices Integration - Visual Guide

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸ‘¨â€ğŸŒ¾ USER / FRONTEND                               â”‚
â”‚                     (React Dashboard - Port 8080)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ HTTP REST API
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   MS7 - DASHBOARD BACKEND (Port 8006)                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                        API ROUTES (/api/*)                          â”‚ â”‚
â”‚ â”‚  GET /parcelles                    GET /parcelles/:id/enriched      â”‚ â”‚
â”‚ â”‚  GET /parcelles/:id                GET /microservices/health        â”‚ â”‚
â”‚ â”‚  GET /etat-hydrique                GET /parcelles/:id/forecast      â”‚ â”‚
â”‚ â”‚  GET /alertes                      GET /parcelles/:id/rules-eval    â”‚ â”‚
â”‚ â”‚  GET /recommandations              GET /parcelles/:id/ai-reco       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚              PARCEL CONTROLLER + INTEGRATION SERVICE                â”‚ â”‚
â”‚ â”‚  â€¢ Database queries (PostgreSQL/PostGIS)                            â”‚ â”‚
â”‚ â”‚  â€¢ Microservices orchestration                                      â”‚ â”‚
â”‚ â”‚  â€¢ Data enrichment & merging                                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚           â”‚           â”‚           â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚           â”‚           â”‚           â”‚
          â”‚ Parallel  â”‚ API       â”‚ Calls     â”‚
          â”‚ Execution â”‚           â”‚           â”‚
          â–¼           â–¼           â–¼           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   MS3   â”‚ â”‚   MS4   â”‚ â”‚   MS5   â”‚ â”‚   MS6   â”‚
    â”‚ Vision  â”‚ â”‚ Water   â”‚ â”‚  Agro   â”‚ â”‚   AI    â”‚
    â”‚ Plante  â”‚ â”‚Forecast â”‚ â”‚ Rules   â”‚ â”‚  Reco   â”‚
    â”‚  :8002  â”‚ â”‚  :8003  â”‚ â”‚  :8004  â”‚ â”‚  :8005  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚           â”‚           â”‚           â”‚
         â”‚           â”‚           â”‚           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   TimescaleDB/PostGIS â”‚
         â”‚      PostgreSQL       â”‚
         â”‚        :5432          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Sequence

### Scenario 1: Get Enriched Parcel Data

```
User                Dashboard            Database        MS4         MS5         MS6
 â”‚                     â”‚                    â”‚            â”‚           â”‚           â”‚
 â”‚  GET /parcelles/1   â”‚                    â”‚            â”‚           â”‚           â”‚
 â”‚    /enriched        â”‚                    â”‚            â”‚           â”‚           â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚                    â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚  SELECT * FROM     â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚  parcelles WHERE   â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚  id = 1            â”‚            â”‚           â”‚           â”‚
 â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚                    â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚  Parcel data       â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚           â”‚           â”‚
 â”‚                     â”‚                    â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚  POST /forecasts/with-recommendations       â”‚           â”‚
 â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚           â”‚           â”‚
 â”‚                     â”‚                    â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚  POST /evaluate                 â”‚           â”‚           â”‚
 â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚           â”‚
 â”‚                     â”‚                    â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚  POST /api/v1/irrigation/recommandation-ia  â”‚           â”‚
 â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                    â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚  Forecast data     â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚           â”‚
 â”‚                     â”‚                    â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚  Rules data        â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
 â”‚                     â”‚                    â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚  AI Recommendation â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                     â”‚                    â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚  Merge all data    â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚  into enriched     â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚  response          â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚                    â”‚            â”‚           â”‚           â”‚
 â”‚  Enriched JSON      â”‚                    â”‚            â”‚           â”‚           â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚            â”‚           â”‚           â”‚
 â”‚                     â”‚                    â”‚            â”‚           â”‚           â”‚
```

## Microservice Integration Details

### MS3 - Vision Plante (Plant Vision)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MS3 - Vision            â”‚
â”‚   Plant Disease Detection       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Endpoints:                      â”‚
â”‚  POST /analyze                  â”‚
â”‚  POST /upload-and-analyze       â”‚
â”‚  GET  /health                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Current Status:                 â”‚
â”‚  âš ï¸  Placeholder integration    â”‚
â”‚  Requires image upload          â”‚
â”‚  Future: Link images to parcels â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MS4 - PrÃ©vision Eau (Water Prediction)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MS4 - Water Forecast       â”‚
â”‚   Hydric Stress Prediction      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Endpoints Used:                 â”‚
â”‚  POST /forecasts/with-          â”‚
â”‚       recommendations           â”‚
â”‚  GET  /capteurs/:id/history     â”‚
â”‚  GET  /health                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Input:                          â”‚
â”‚  â€¢ capteur_id: "sensor_p1"      â”‚
â”‚  â€¢ horizon_days: 7              â”‚
â”‚  â€¢ model: "hybrid"              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Output:                         â”‚
â”‚  â€¢ 7-day stress forecast        â”‚
â”‚  â€¢ Trend analysis               â”‚
â”‚  â€¢ Agro recommendations         â”‚
â”‚  â€¢ Historical sensor data       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MS5 - RÃ¨gles Agro (Agronomic Rules)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     MS5 - Agronomic Rules       â”‚
â”‚   Rule-based Evaluation         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Endpoints Used:                 â”‚
â”‚  POST /evaluate                 â”‚
â”‚  GET  /parcelles/:id/info       â”‚
â”‚  GET  /health                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Input:                          â”‚
â”‚  â€¢ parcelle_id                  â”‚
â”‚  â€¢ culture_type                 â”‚
â”‚  â€¢ stress_hydrique_actuel       â”‚
â”‚  â€¢ derniere_irrigation_jours    â”‚
â”‚  â€¢ stade_culture                â”‚
â”‚  â€¢ meteo_prevision              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Output:                         â”‚
â”‚  â€¢ Irrigation priority          â”‚
â”‚  â€¢ Rule-based recommendations   â”‚
â”‚  â€¢ Risk assessment              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MS6 - Recommandations IA (AI Irrigation)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MS6 - AI Recommendations   â”‚
â”‚   Hybrid AI + Scientific Calc   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Endpoints Used:                 â”‚
â”‚  POST /api/v1/irrigation/       â”‚
â”‚       recommandation-ia         â”‚
â”‚  GET  /api/v1/irrigation/       â”‚
â”‚       historique                â”‚
â”‚  GET  /health                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Input:                          â”‚
â”‚  â€¢ zone_id (parcel)             â”‚
â”‚  â€¢ culture_type                 â”‚
â”‚  â€¢ prediction (weather)         â”‚
â”‚  â€¢ regles (agro rules)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Output:                         â”‚
â”‚  â€¢ volume_eau_m3                â”‚
â”‚  â€¢ duree_minutes                â”‚
â”‚  â€¢ horaire_debut (optimal time) â”‚
â”‚  â€¢ AI analysis & reasoning      â”‚
â”‚  â€¢ Practical recommendations    â”‚
â”‚  â€¢ Confidence score             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## API Endpoint Mapping

### Dashboard â†’ Microservices

| Dashboard Endpoint | Target Service | Target Endpoint |
|-------------------|----------------|-----------------|
| `GET /api/parcelles/:id/enriched` | MS4, MS5, MS6 | Multiple (parallel) |
| `GET /api/parcelles/:id/forecast` | MS4 | `POST /forecasts/with-recommendations` |
| `GET /api/parcelles/:id/rules-evaluation` | MS5 | `POST /evaluate` |
| `GET /api/parcelles/:id/ai-recommendations` | MS6 | `POST /api/v1/irrigation/recommandation-ia` |
| `GET /api/parcelles/:id/irrigation-history` | MS6 | `GET /api/v1/irrigation/historique?zone_id=:id` |
| `GET /api/sensors/:id/history` | MS4 | `GET /capteurs/:id/history?days=7` |
| `GET /api/microservices/health` | MS3, MS4, MS5, MS6 | `GET /health` (all) |

## Request/Response Examples

### Example 1: Water Forecast Request

**Dashboard Request:**
```http
GET /api/parcelles/1/forecast
```

**Dashboard â†’ MS4:**
```http
POST http://ms4-prevision:8003/forecasts/with-recommendations
Content-Type: application/json

{
  "capteur_id": "sensor_p1",
  "horizon_days": 7,
  "model": "hybrid"
}
```

**MS4 Response:**
```json
{
  "capteur_id": "sensor_p1",
  "forecast": {
    "dates": ["2025-12-07", "2025-12-08", ...],
    "stress_predictions": [0.45, 0.52, 0.58, ...],
    "trend": "increasing"
  },
  "recommendations": [
    {
      "date": "2025-12-08",
      "action": "irrigation",
      "priority": "high"
    }
  ]
}
```

### Example 2: AI Recommendation Request

**Dashboard Request:**
```http
GET /api/parcelles/1/ai-recommendations
```

**Dashboard â†’ MS6:**
```http
POST http://ms6-reco:8005/api/v1/irrigation/recommandation-ia
Content-Type: application/json

{
  "zone_id": 1,
  "culture_type": "Ble",
  "prediction": {
    "et0_mm_jour": 4.5,
    "temperature_celsius": 25.0,
    "humidite_pourcentage": 60.0,
    "precipitation_mm": 0.0
  },
  "regles": {
    "priorite": "haute",
    "stade_culture": "croissance",
    "contraintes": []
  }
}
```

**MS6 Response:**
```json
{
  "zone_id": 1,
  "recommendation_id": "uuid-...",
  "volume_eau_m3": 125.5,
  "duree_minutes": 180,
  "horaire_debut": "21:00:00",
  "status": "PLANIFIE",
  "analyse": {
    "contexte_climat": "Temperature elevated, low humidity...",
    "justification": "Based on ET0 and growth stage...",
    "conseils": ["Irrigate in the evening", "Monitor soil moisture"]
  },
  "confiance": 0.87
}
```

## Performance Optimization

### Parallel Execution Timeline

```
Time (ms)    Dashboard    MS4      MS5      MS6
    0        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ Start enrichment            â”‚
   10        â”‚                             â”‚
             â”œâ”€â”€â”€â”€â”€â”€>â”‚     Start MS4       â”‚
             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Start MS5   â”‚
             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ MS6  â”‚
   20        â”‚       â”‚              â”‚      â”‚
             â”‚       â”‚ Processing   â”‚      â”‚
   30        â”‚       â”‚              â”‚      â”‚
             â”‚       â”‚              â”‚      â”‚ Processing
  ...        â”‚       â”‚              â”‚      â”‚
  500        â”‚       â”‚<â”€â”€â”€â”€â”€â”˜       â”‚      â”‚
             â”‚       â”‚ MS4 Done     â”‚      â”‚
  600        â”‚       â”‚              â”‚<â”€â”€â”€â”€â”€â”˜
             â”‚       â”‚              â”‚ MS5 Done
  800        â”‚       â”‚              â”‚      â”‚<â”€â”€â”€â”€â”€â”˜
             â”‚       â”‚              â”‚      â”‚ MS6 Done
  810        â”‚<â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
             â”‚ Merge responses
  820        â”‚ Return enriched data
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Total: ~820ms (parallel) vs ~1900ms (sequential)
Speedup: 2.3x
```

## Error Handling Flow

```
Dashboard Request
      â”‚
      â–¼
Try MS4 Call
      â”‚
      â”œâ”€Successâ”€â”€â”€â”€> Store result
      â”‚
      â””â”€Failureâ”€â”€â”€â”€> Log warning
                     â””â”€> Continue with null
      â”‚
      â–¼
Try MS5 Call
      â”‚
      â”œâ”€Successâ”€â”€â”€â”€> Store result
      â”‚
      â””â”€Failureâ”€â”€â”€â”€> Log warning
                     â””â”€> Continue with null
      â”‚
      â–¼
Try MS6 Call
      â”‚
      â”œâ”€Successâ”€â”€â”€â”€> Store result
      â”‚
      â””â”€Failureâ”€â”€â”€â”€> Log warning
                     â””â”€> Continue with null
      â”‚
      â–¼
Merge All Results
(even if some are null)
      â”‚
      â–¼
Return Response
(gracefully degraded)
```

## Health Check Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Microservices Health Status                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MS3 - Vision     â”‚ âš ï¸  UNAVAILABLE (image-based)   â”‚
â”‚ MS4 - Forecast   â”‚ âœ… HEALTHY      (200 OK)        â”‚
â”‚ MS5 - Rules      â”‚ âœ… HEALTHY      (200 OK)        â”‚
â”‚ MS6 - AI Reco    â”‚ âœ… HEALTHY      (200 OK)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Overall Status   â”‚ âš ï¸  DEGRADED (1 service down)   â”‚
â”‚ Last Check       â”‚ 2025-12-06 14:30:00             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Visual Guide Complete!** Use this diagram to understand the microservices integration architecture.
